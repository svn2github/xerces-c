SUBDIRS = src tests samples

EXTRA_DIST = config/pretty-make \
             scripts/createBindingsFormatFromHPP.pl \
             scripts/makeStringDefinition.pl \
             scripts/packageBinaries.pl \
             scripts/packageSources.pl \
             scripts/sanityTest.pl \
             scripts/sanityTest_ExpectedResult.log

ACLOCAL_AMFLAGS = -I m4

check:
	-rm -f tempResult
	export PATH=${abs_top_builddir}/samples:${abs_top_builddir}/tests:"${PATH}" && export XERCESC_NLS_HOME=${abs_top_builddir}/src/.libs && cd ${top_srcdir} && perl scripts/sanityTest.pl 2>&1 | ${SED} 's/ *[0-9][0-9]*  *ms */{timing removed}/' 1> ${abs_top_builddir}/tempResult
	diff tempResult ${top_srcdir}/scripts/sanityTest_ExpectedResult.log
	
test-suite:
	cd swig/perl && perl Makefile.PL && make && make test
	touch $@
